<%- include('partials/header.ejs') -%>

<main>
  <%
    back_link = locals.books ? "/books" : "/travel"
  %>
  <a class="app__back-link" href="<%= back_link %>">Back</a>

    <form>
      <label class="book__search-label" for="book-search">Search</label>
      <input id="js-search-input" class="book__search-input" type="text" id="book-search" name="book-search">
    </form>

    <% if(locals.books) { %>
      <%- include('partials/books_table.ejs') -%>
    <% } else if (locals.sites) { %>
      <%- include('partials/travel_table.ejs') -%>
    <% } %>
</main>

<div class="hidden books__modal-bg js-modal-bg"></div>
<div class="hidden books__modal-form-wrapper js-modal">
  <a href="#" class="js-modal__close" onClick="location.reload();">X</a>
  <form method="post" action="/edit-book">
    <input class="hidden" type="text" name="type" value="<%= type %>" readonly>
    <input class="hidden" type="text" id="js-edit-book__id" name="id" readonly>
    <label for="js-edit-book__title">Title:</label>
    <input type="text" id="js-edit-book__title" name="title">
    <label for="js-edit-book__author">Author:</label>
    <input type="text" id="js-edit-book__author" name="author" disabled>
    <label for="js-edit-book__status">Status:</label>
    <select id="js-modal__status" name="status">
      <option value="1">Not started</option>
      <option value="2">Wishlist</option>
      <option value="3">In progress</option>
      <option value="4">Completed</option>
    </select>
    <div class="hidden js-modal__year-wrapper">
      <label for="js-modal__year">Completion year:</label>
      <input type="text" id="js-modal__year" name="year">
    </div>
    <button>Save changes</button>
  </form>
</div>

<script src="dist/javascript/lib/paginate.min.js"></script>
<script src="dist/javascript/table.js"></script>
<script src="dist/javascript/modal.js"></script>
<script src="dist/javascript/editbook.js"></script>

<%- include('partials/footer.ejs') -%>
